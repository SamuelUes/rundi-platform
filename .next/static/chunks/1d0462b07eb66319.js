(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51993,e=>{"use strict";e.s(["typography",0,{h1:"text-2xl font-semibold",h2:"text-sm font-semibold",body:"text-sm",bodyMuted:"text-xs"}])},63405,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(36180);var o=e.i(98925),r=e.i(746),a=e.i(8277),n=e.i(51993);function l(){let[e,l]=(0,s.useState)([]),[d,i]=(0,s.useState)(!0),[c,m]=(0,s.useState)(null),[u,x]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[g,j]=(0,s.useState)(null),[f,C]=(0,s.useState)({name:"",countryCode:"",bounds:{north:"",south:"",east:"",west:""}});async function N(){try{let e=(0,o.collection)(r.firestore,"service_areas"),t=await (0,o.getDocs)(e),s=[];t.forEach(e=>{let t=e.data();s.push({id:e.id,name:t.name??null,countryCode:t.countryCode??null,bounds:t.bounds??null})}),l(s),i(!1)}catch(e){m("Error al cargar zonas de servicio."),i(!1)}}async function v(e){e.preventDefault(),x(null);let t=f.name.trim(),s=f.countryCode.trim().toUpperCase(),a={north:parseFloat(f.bounds.north),south:parseFloat(f.bounds.south),east:parseFloat(f.bounds.east),west:parseFloat(f.bounds.west)};if(!t)return void x("El nombre es obligatorio.");if(!s)return void x("El código de país es obligatorio.");if(!Object.values(a).every(e=>!Number.isNaN(e)))return void x("Debes completar los límites geográficos (north/south/east/west).");try{if(p(!0),g){let e=(0,o.doc)(r.firestore,"service_areas",g.id);await (0,o.updateDoc)(e,{name:t,countryCode:s,bounds:a,updatedAt:new Date().toISOString()})}else await (0,o.addDoc)((0,o.collection)(r.firestore,"service_areas"),{name:t,countryCode:s,bounds:a,createdAt:new Date().toISOString()});C({name:"",countryCode:"",bounds:{north:"",south:"",east:"",west:""}}),j(null),await N(),y(!1)}catch(e){x(g?"No se pudo actualizar el área. Intenta de nuevo.":"No se pudo guardar el área. Intenta de nuevo.")}finally{p(!1)}}return(0,s.useEffect)(()=>{N()},[]),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("header",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:`${n.typography.h1} ${a.themeColors.textPrimary}`,children:"Zonas de servicio"}),(0,t.jsx)("p",{className:`${n.typography.body} ${a.themeColors.textSecondary}`,children:"Listado de zonas de servicio registradas en Firestore."})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg border bg-white p-4 shadow-sm sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:`${n.typography.body} ${a.themeColors.textSecondary}`,children:["Total áreas registradas: ",(0,t.jsx)("strong",{children:e.length})]}),(0,t.jsx)("p",{className:`text-xs ${a.themeColors.textMuted}`,children:"Administra los límites y la ubicación de cada zona."})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{x(null),j(null),y(!0)},className:`inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-semibold shadow-sm ${a.themeColors.buttonPrimaryBg} ${a.themeColors.buttonPrimaryHoverBg} ${a.themeColors.buttonPrimaryText}`,children:"+ Agregar zona de servicio"})]}),d&&(0,t.jsx)("p",{className:`${n.typography.body} ${a.themeColors.textSecondary}`,children:"Cargando zonas de servicio..."}),!d&&c&&(0,t.jsx)("p",{className:`${n.typography.body} ${a.themeColors.dangerText}`,children:c}),!d&&!c&&(0,t.jsx)("div",{className:"overflow-x-auto rounded-xl border bg-white shadow-sm",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,t.jsx)("thead",{className:`${a.themeColors.appBackground}`,children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:"ID"}),(0,t.jsx)("th",{className:"px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:"Nombre"}),(0,t.jsx)("th",{className:"px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:"País"}),(0,t.jsx)("th",{className:"px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:"Bounds"}),(0,t.jsx)("th",{className:"px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-zinc-500 text-right",children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b last:border-0",children:[(0,t.jsx)("td",{className:`px-4 py-3 text-xs ${a.themeColors.textMuted}`,children:e.id}),(0,t.jsx)("td",{className:`px-4 py-3 text-sm font-medium ${a.themeColors.textPrimary}`,children:e.name||"(sin nombre)"}),(0,t.jsx)("td",{className:`px-4 py-3 ${a.themeColors.textSecondary}`,children:(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] uppercase text-zinc-600",children:e.countryCode||"N/D"})}),(0,t.jsx)("td",{className:`px-4 py-3 text-xs ${a.themeColors.textSecondary}`,children:e.bounds?(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{children:["North: ",e.bounds.north]}),(0,t.jsxs)("div",{children:["South: ",e.bounds.south]}),(0,t.jsxs)("div",{children:["East: ",e.bounds.east]}),(0,t.jsxs)("div",{children:["West: ",e.bounds.west]})]}):(0,t.jsx)("span",{className:a.themeColors.textMuted,children:"Sin bounds"})}),(0,t.jsx)("td",{className:"px-4 py-3 text-right",children:(0,t.jsx)("button",{type:"button",onClick:()=>{x(null),j(e),C({name:e.name??"",countryCode:e.countryCode??"",bounds:{north:String(e.bounds?.north??""),south:String(e.bounds?.south??""),east:String(e.bounds?.east??""),west:String(e.bounds?.west??"")}}),y(!0)},className:"inline-flex items-center rounded-md border px-3 py-1 text-xs font-medium text-zinc-600 hover:bg-zinc-50",children:"Editar"})})]},e.id))})]})}),b&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-lg bg-white p-5 shadow-xl",children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:`${n.typography.h2} ${a.themeColors.textPrimary}`,children:"Nueva zona de servicio"}),(0,t.jsx)("button",{type:"button",onClick:()=>y(!1),className:`rounded px-2 py-1 text-sm ${a.themeColors.textSecondary} ${a.themeColors.surfaceHover}`,children:"Cerrar"})]}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:`block text-sm font-medium ${a.themeColors.textSecondary}`,children:"Nombre del área"}),(0,t.jsx)("input",{type:"text",value:f.name,onChange:e=>C(t=>({...t,name:e.target.value})),className:`mt-1 w-full rounded-md border px-3 py-2 text-sm outline-none ${a.themeColors.inputBorder} ${a.themeColors.textPrimary}`,placeholder:"Ej: Managua Centro",disabled:h})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:`block text-sm font-medium ${a.themeColors.textSecondary}`,children:"Código de país (ISO)"}),(0,t.jsx)("input",{type:"text",value:f.countryCode,onChange:e=>C(t=>({...t,countryCode:e.target.value})),className:`mt-1 w-full rounded-md border px-3 py-2 text-sm uppercase outline-none ${a.themeColors.inputBorder} ${a.themeColors.textPrimary}`,placeholder:"Ej: NI",maxLength:3,disabled:h})]}),(0,t.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:["north","south","east","west"].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:`block text-sm font-medium ${a.themeColors.textSecondary}`,children:e.toUpperCase()}),(0,t.jsx)("input",{type:"number",step:"any",value:f.bounds[e],onChange:t=>C(s=>({...s,bounds:{...s.bounds,[e]:t.target.value}})),className:`mt-1 w-full rounded-md border px-3 py-2 text-sm outline-none ${a.themeColors.inputBorder} ${a.themeColors.textPrimary}`,placeholder:"0.00",disabled:h})]},e))}),u&&(0,t.jsx)("p",{className:`text-sm ${a.themeColors.dangerText}`,children:u}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{y(!1),j(null)},className:`rounded-md border px-4 py-2 text-sm ${a.themeColors.textSecondary}`,disabled:h,children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:h,className:`inline-flex items-center rounded-md px-4 py-2 text-sm font-semibold ${a.themeColors.buttonPrimaryBg} ${a.themeColors.buttonPrimaryHoverBg} ${a.themeColors.buttonPrimaryText} disabled:opacity-50`,children:h?"Guardando...":g?"Actualizar":"Guardar"})]})]})]})})]})}e.s(["default",()=>l])}]);