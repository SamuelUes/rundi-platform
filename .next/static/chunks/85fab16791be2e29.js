(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51993,e=>{"use strict";e.s(["typography",0,{h1:"text-2xl font-semibold",h2:"text-sm font-semibold",body:"text-sm",bodyMuted:"text-xs"}])},47961,e=>{"use strict";var s=e.i(43476),t=e.i(71645);e.i(51718);var a=e.i(18357),r=e.i(746),i=e.i(8277),l=e.i(51993);function n(){let[e,n]=(0,t.useState)([]),[o,c]=(0,t.useState)(!0),[d,x]=(0,t.useState)(null),[m,h]=(0,t.useState)("");(0,t.useEffect)(()=>{let e=(0,a.onAuthStateChanged)(r.firebaseAuth,async e=>{if(!e){x("Sesión no encontrada."),c(!1);return}try{let s=await e.getIdToken(),t=await fetch("/api/admin/drivers",{headers:{Authorization:`Bearer ${s}`}});if(!t.ok){let e=(await t.json().catch(()=>({}))).error||"Error al cargar conductores.";x(e),c(!1);return}let a=await t.json();n(a.drivers||[]),c(!1)}catch(e){x("Error al comunicar con el servidor."),c(!1)}});return()=>e()},[]);let p=(0,t.useMemo)(()=>{let s=m.trim().toLowerCase();return s?e.filter(e=>[e.id,e.userId,e.email,e.name,e.phone,e.licenseNumber,e.department,e.municipality,e.accountStatus,e.documentsStatus].filter(Boolean).join(" ").toLowerCase().includes(s)):e},[e,m]);return(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("header",{className:"space-y-1",children:[(0,s.jsx)("h1",{className:`${l.typography.h1} ${i.themeColors.textPrimary}`,children:"Conductores"}),(0,s.jsx)("p",{className:`${l.typography.body} ${i.themeColors.textSecondary}`,children:"Lista de conductores con datos de Supabase y Firebase Auth, incluyendo servicio de conductor designado."})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("input",{type:"search",value:m,onChange:e=>h(e.target.value),placeholder:"Buscar por nombre, correo, ID, licencia o teléfono",className:`w-full rounded-xl border border-zinc-200 bg-white px-4 py-2.5 text-sm shadow-sm outline-none transition focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100 ${i.themeColors.textPrimary}`}),(0,s.jsx)("p",{className:`mt-1 text-xs ${i.themeColors.textMuted}`,children:"Búsqueda sobre: nombre, correo, UID, ID de conductor, teléfono, licencia y estados."})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-zinc-100 px-3 py-1 font-medium text-zinc-600",children:["Conductores",(0,s.jsx)("strong",{className:"text-zinc-900",children:e.length})]}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-3 py-1 font-medium text-emerald-700",children:["Filtrados",(0,s.jsx)("strong",{children:p.length})]})]})]}),o&&(0,s.jsx)("p",{className:`${l.typography.body} ${i.themeColors.textSecondary}`,children:"Cargando conductores..."}),!o&&d&&(0,s.jsx)("p",{className:`${l.typography.body} ${i.themeColors.dangerText}`,children:d}),!o&&!d&&(0,s.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-zinc-200 bg-white shadow-sm",children:(0,s.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,s.jsx)("thead",{className:"bg-linear-to-r from-emerald-50 to-white text-[11px] uppercase tracking-wide text-emerald-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Conductor"}),(0,s.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Contacto"}),(0,s.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Licencia"}),(0,s.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Estado cuenta"}),(0,s.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Zona"}),(0,s.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Métricas"}),(0,s.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Servicios"})]})}),(0,s.jsx)("tbody",{children:p.map((e,t)=>{let a="active"===e.accountStatus?"bg-emerald-100 text-emerald-700":"rejected"===e.accountStatus?"bg-red-100 text-red-700":"bg-zinc-100 text-zinc-600",r="verified"===e.documentsStatus?"bg-emerald-50 text-emerald-700":"bg-amber-100 text-amber-700",l=e.services.length?e.services.join(", "):"Sin servicios asignados";return(0,s.jsxs)("tr",{className:`${t%2==0?"bg-white":"bg-zinc-50/60"} border-b last:border-0 transition hover:bg-emerald-50/60`,children:[(0,s.jsx)("td",{className:`px-4 py-3 align-top text-xs ${i.themeColors.textPrimary}`,children:(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-zinc-900",children:e.name||"(sin nombre)"}),(0,s.jsxs)("div",{className:"text-[11px] text-zinc-500",children:["UID: ",e.userId]}),(0,s.jsxs)("div",{className:"text-[11px] text-zinc-400",children:["Driver ID: ",e.id]})]})}),(0,s.jsx)("td",{className:`px-4 py-3 align-top text-xs ${i.themeColors.textSecondary}`,children:(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("div",{children:e.email||"(sin email)"}),(0,s.jsx)("div",{children:e.phone||"(sin teléfono)"})]})}),(0,s.jsx)("td",{className:`px-4 py-3 align-top text-xs ${i.themeColors.textSecondary}`,children:e.licenseNumber||"(sin licencia)"}),(0,s.jsx)("td",{className:"px-4 py-3 align-top text-xs",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-[11px] font-semibold ${a}`,children:["Cuenta: ",e.accountStatus||"N/D"]}),(0,s.jsxs)("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-[11px] font-semibold ${r}`,children:["Docs: ",e.documentsStatus||"N/D"]})]})}),(0,s.jsxs)("td",{className:`px-4 py-3 align-top text-xs ${i.themeColors.textSecondary}`,children:[(0,s.jsx)("div",{children:e.department||"(sin departamento)"}),(0,s.jsx)("div",{children:e.municipality||"(sin municipio)"})]}),(0,s.jsxs)("td",{className:`px-4 py-3 align-top text-xs ${i.themeColors.textSecondary}`,children:[(0,s.jsxs)("div",{children:["Viajes: ",e.totalRides??"N/D"]}),(0,s.jsxs)("div",{children:["Rating: ",e.averageRating??"N/D"]})]}),(0,s.jsx)("td",{className:`px-4 py-3 align-top text-xs ${i.themeColors.textSecondary}`,children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-[11px] font-semibold ${e.hasDesignatedDriverService?"bg-emerald-100 text-emerald-700":"bg-zinc-100 text-zinc-600"}`,children:["Designado: ",e.hasDesignatedDriverService?"Sí":"No"]}),(0,s.jsx)("p",{className:"text-[11px] text-zinc-500",children:l})]})})]},e.id)})})]})})]})}e.s(["default",()=>n])}]);